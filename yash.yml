---
 - hosts: ec2
   become: true
   name: install tomcat
   tasks:
   - name: install tomcat 8
     get_url:
       url: https://archive.apache.org/dist/tomcat/tomcat-8/v8.5.88/bin/apache-tomcat-8.5.88.tar.gz
       dest: /opt/
   - name: Extract Tomcat
     unarchive:
        src: /opt/apache-tomcat-8.5.88.tar.gz
        dest: /opt/
        remote_src: yes
   - name: Copy the index html page  
     copy: src=/home/ubuntu/tomcat-users.xml dest=/opt/apache-tomcat-8.5.88/conf/tomcat-users.xml
   - name: copy the manager file
     copy: src=/home/ubuntu/manager.xml dest=/opt/apache-tomcat-8.5.88/Catalina/localhost/manager.xml

   - name: restart tomcat8
     service: name=tomcat8 state=started
 - hosts: ec2
   become: true
   tasks:
   - name: install java mysql-server
     apt: name=mysql-server update_cache=yes state=latest
   - name: start mysql-server
     service: name=mysql-server state=started
 - hosts: ec2
   become: true
   tasks:
   - name: install java
     apt: name=openjdk-17-jdk update_cache=yes state=latest
 - hosts: ec2
   become: true
   name: install maven
   tasks:
   - name: install maven
     apt: name:maven update_cache=yes state=latest
    
